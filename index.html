<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Encantos da Lis ‚Äì Pagamento PIX</title>
  <script src="https://sdk.mercadopago.com/js/v2"></script>
  <style>
    *{box-sizing:border-box;margin:0;padding:0;}
    body{font-family:Arial,sans-serif;background:#FF69B4;}
    .page-border{border:8px solid #FF1493;max-width:1000px;margin:20px auto;background:#fff;}
    .sobre{background:#C71585;color:#fff;text-align:center;padding:20px;}
    .sobre img{width:150px;border-radius:50%;margin-bottom:15px;}
    .sobre h1{font-size:24px;margin-bottom:10px;}
    .sobre p{font-size:14px;line-height:1.5;max-width:600px;margin:auto;}
    .products{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px;padding:20px;}
    .product{background:#fff;border:2px solid #C71585;border-radius:8px;display:flex;flex-direction:column;}
    .product img{width:100%;object-fit:cover;}
    .info{padding:15px;flex:1;font-size:14px;}
    .info strong{display:block;font-size:16px;margin-bottom:5px;}
    .info em{display:block;font-style:italic;color:#555;margin-bottom:10px;}
    .info .details{margin-bottom:10px;}
    .buy-btn{background:#FF1493;color:#fff;text-align:center;padding:10px;cursor:pointer;text-decoration:none;font-weight:bold;border-bottom-left-radius:8px;border-bottom-right-radius:8px;}
    .buy-btn:hover{background:#e01381;}
    /* Modal */
    .overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.6);align-items:center;justify-content:center;z-index:1000;}
    .modal{background:#fff;border-radius:8px;max-width:400px;width:90%;overflow:hidden;}
    .modal-header{background:#C71585;color:#fff;padding:10px;position:relative;text-align:center;}
    .modal-header .close{position:absolute;top:8px;right:12px;cursor:pointer;font-size:20px;}
    .tabs{display:flex;border-bottom:1px solid #ddd;}
    .tab-btn{flex:1;padding:10px;text-align:center;cursor:pointer;background:#f0f0f0;}
    .tab-btn.active{background:#fff;font-weight:bold;border-bottom:2px solid #C71585;}
    .tab-content{display:none;padding:15px;}
    .tab-content.active{display:block;}
    .tab-content label{display:block;margin-bottom:5px;font-weight:bold;}
    .tab-content input,.tab-content textarea{width:100%;margin-bottom:10px;padding:8px;border:1px solid #ccc;border-radius:4px;}
    #qrContainer{text-align:center;padding:15px;}
    #success{display:none;color:green;text-align:center;padding:10px;}
    #finalizar{background:#FF1493;color:#fff;width:100%;padding:10px;border:none;cursor:pointer;font-size:16px;}
    #finalizar:hover{background:#e01381;}
  </style>
</head>
<body>
  <div class="page-border">
    <div class="sobre">
      <img src="eliza.jpg" alt="Eliza Gabriela">
      <h1>Sobre Mim</h1>
      <p>Eliza Gabriela Laceira<br>
      Sou empreendedora de la√ßos h√° 1 ano, comecei do nada para entregar tudo para as mam√£es que amam deixar sua princesa ainda mais linda.<br>
      Tenho 25 anos e sou m√£e do Jo√£o Pedro e da Anna Lis.<br>
      Comecei com minha princesa Lis para realizar o sonho de ter uma princesa e fazer da minha paix√£o minha fonte de renda.<br>
      <em>Sempre ser√° um prazer atender voc√™!</em></p>
    </div>
    <div class="products">
      <!-- repetir para cada produto -->
      <div class="product" data-id="1" data-price="25.00">
        <img src="imagem1.jpg" alt="Colete Country">
        <div class="info">
          <strong>Colete Country</strong>
          <em>"feltro"</em>
          <div class="details">Tamanho: P<br>36 cm ¬∑ 42 cm</div>
          <div class="details">Valor: R$ 25,00</div>
        </div>
        <div class="buy-btn">Comprar</div>
      </div>
      <!-- ... imagem2..5 similar com pre√ßos 30,37,20,30 -->
    </div>
  </div>
  <div class="overlay" id="overlay">
    <div class="modal">
      <div class="modal-header">Pagamento PIX <span class="close" id="close">√ó</span></div>
      <div class="tabs">
        <div class="tab-btn active" data-tab="payment">Pagamento</div>
        <div class="tab-btn" data-tab="form">Formul√°rio</div>
      </div>
      <div class="tab-content active" id="payment">
        <div id="mp-checkout"></div>
        <div id="success">üéâ Pagamento conclu√≠do com sucesso!</div>
      </div>
      <div class="tab-content" id="form">
        <label>Nome</label><input type="text" id="nome">
        <label>Endere√ßo</label><textarea id="endereco"></textarea>
        <label>N√∫mero</label><input type="text" id="numero">
        <label>Cidade</label><input type="text" id="cidade">
        <label>Bairro</label><input type="text" id="bairro">
        <label>Ponto de Ref</label><input type="text" id="ref">
        <label>WhatsApp</label><input type="text" id="whatsapp">
        <button id="finalizar">Enviar para WhatsApp</button>
      </div>
      <div id="qrContainer"></div>
    </div>
  </div>
  <script>
    const mp = new MercadoPago('APP_USR-0e89b929-3e9d-4bb7-b22c-92954f09ff18',{locale:'pt-BR'});
    let prefId;
    document.querySelectorAll('.buy-btn').forEach(btn=>btn.addEventListener('click',async()=>{
      const prod = btn.closest('.product');
      const id=prod.dataset.id;
      // cria prefer√™ncia
      const res=await fetch(`/.netlify/functions/generatePreference?product=${id}`);
      const {id:pid}=await res.json(); prefId=pid;
      // renderiza PIX
      mp.checkout({preference:{id:prefId},render:{container:'#mp-checkout',label:'Pix ‚Äî Pagar agora'}}).open();
      document.getElementById('overlay').style.display='flex';
    }));
    document.querySelectorAll('.tab-btn').forEach(b=>b.addEventListener('click',()=>{
      document.querySelectorAll('.tab-btn').forEach(x=>x.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(x=>x.classList.remove('active'));
      b.classList.add('active'); document.getElementById(b.dataset.tab).classList.add('active');
    }));
    document.getElementById('close').onclick=()=>document.getElementById('overlay').style.display='none';
    mp.on('approved',()=>{
      document.getElementById('success').style.display='block';
      // ap√≥s aprovado, ir para formul√°rio
      document.querySelector('[data-tab=form]').click();
    });
    document.getElementById('finalizar').addEventListener('click',()=>{
      let msg=`‚ú® Pedido: Colete Country ‚Äì R$ ${document.querySelector('.product[data-id]')?.dataset.price}\n`;
      msg+=`Nome: ${encodeURIComponent(document.getElementById('nome').value)}\n`+
           `End: ${encodeURIComponent(document.getElementById('endereco').value)}, n¬∫ ${encodeURIComponent(document.getElementById('numero').value)}\n`+
           `Cidade: ${encodeURIComponent(document.getElementById('cidade').value)}\n`+
           `Bairro: ${encodeURIComponent(document.getElementById('bairro').value)}\n`+
           `Ref: ${encodeURIComponent(document.getElementById('ref').value)}\n`+
           `Whats: ${encodeURIComponent(document.getElementById('whatsapp').value)}`;
      window.open(`https://wa.me/5531987961356?text=${encodeURIComponent(msg)}`,'_blank');
    });
  </script>
</body>
</html>
